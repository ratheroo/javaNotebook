*mysql*

- 事务是什么？
  - acid
  - 一批操作
- 事务如何保证一致性？
  - 通过业务sql?
- 并发事务如何不干扰？
- 一致性指什么？
- 操作的一致性指什么？
- 表级锁锁住整张表么？
- 行级锁是锁住特定一行数据么？
- 意向锁是什么？
  - 表级锁
  - 操作前先看意向锁
  - 判断用
  - x锁和意象x锁有什么区别？
- for update 是上 x 锁
- select for update 何时上表级 x 锁？
- 临建锁有什么用？
- 范围针对主键
- 谓词锁锁的是什么？
  - 空间索引被锁住会影响查询么？
- 死锁如两门对开等锁
- 业务处理的交叉处理会导致什么问题？
- 四种隔离级别表示什么？
  - 读未提交 未提交时其它事务能看到
  - 读已提交 只有提交的数据才能被看到
  - 可重复读 
    - 每次读到的数据看上去一样？
  - 可串行化 所有事务排队执行
- 事务隔离为何是数据库的基本特征？
- 可重复性是什么？
- 事务隔离为何可以保证可重复性？
- 脏读是读还没提交可能回滚的数据
- 幻读每次读结果不一样
- 不可重复读，读出来的同一条数据值不一样
- 半一致性读是什么？
- 为何 rc 会产生幻读和不可重复读？
  - 不加锁
  - 可能插进来其它事务
- 记录之间的间隔指什么？
  - 记录前后的还不存在的记录
- rr 级别都做哪些锁？
  - 事务启动创建快照
  - 精确查只锁定行
  - 其它查询，锁定范围
- gap 锁的是什么？
- mvcc 是什么？



*日志*

- undo log 日志的作用是什么？
  - 撤销日志
  - undo log 如何保证事务原子性？
    - 什么是事务原子性？
  - 回滚时用到 undo log
  - 反向sql
- 一致性读是什么？
- undo log 何时删除？
- 默会知识是什么？
- 回滚段是什么？
- redo log 是什么？
  - redo log 何时写？
    - 提交后写
- wal 技术是什么？
  - 先写日志，再写磁盘
- mvcc 是什么？
  - 多版本并发控制
- 事务id是什么？
  - 事务发生的顺序
- rowid的作用是什么？
  - 标识一行
- 每个事务的视图都存在内存里么？
- use db 作用是什么？
- 如何知道 gap 锁的开头位置？
  - 区间头尾无锁
  - 查询不存在的数据如何加 gap 锁？
    - 计算不存在数据所属的区间？
- **如果不根据 id 查询如何锁？**
  - **如何确定 gap 范围？**
- 没有命中记录的X锁有何影响？
  - 可能是 gap 锁



*sql 优化*

- 倒排可以考虑负数
- 优化的原理有哪些？
- 选取数据类型有哪些需要注意的问题？
- 数据库引擎根据什么选择？
  - 临时数据为何memory 比 innodb 好？
- 对事务一致性要求不高是什么意思？
- 论坛内容为何myisam为何性能更高？
- 归档库场景是什么？
  - 冷数据
  - 数据不会再修改
  - 查询量很小
- 归档库有什么特点？
  - tukudb
  - 压缩比尽量高
- bigint 括号数字不影响本身大小
- charset 究竟如何选择？
- 数据迁移同步是指什么？
  - 如何用创建时间作为迁移数据的基准？
- dba principal
- 隐式转换在何种情况会产生影响？
- 隐式转换为何不走索引？
- 慢查询日志是什么？
- 数据库运维看什么指标？
- 如何打开慢查询日志？
- 如何判断使用哪种索引类型？
- 页分裂是什么？
  - b+ 树中数据块分裂
  - 插入
- 主键长度为何不能过大？
- 主键索引为何更有优势？
  - 数据按主键存
- 聚集索引和二级索引是什么？
  - 二级索引是索引的索引
  - 聚集索引是数据聚集方式的索引
-  哪些列建索引效果好？
- 如何确定字段选择性?
  - 表中记录字段不重复
- 组合索引是否影响性能？
  - 索引冗余是什么？
- 索引如何覆盖？
- 为何有主从数据库？
- 插入如何优化？
  - preparedStatement 是什么？
    - 发送一次sql 语句
    - 发送多次参数
    - 减少解析成本
  - max packet 参数表示什么？
  - mysql load data 如何使用？
  - 去掉约束索引再导入
- 更新范围尽量少
- like 默认前缀索引
- 全文检索倒排索引是什么？
- solr / es 是什么？
  - 全文检索
- 全文检索技术的原理是什么？
- 驱动表是什么?
- 笛卡尔积是什么？
  - 100\*100*100
- null、not、not in、函数为何不走索引？
- or 为何会导致索引失效？
- union 作用是什么？
  - 做去重
- union all 作用是什么？
  - 不去重
- force index 如何使用？
- 何时会使用临时文件排序？
- 如何使用临时表？
  - 汇总一些中间数据

*场景分析*

- 如何选取主键？
- 哪些值可以做主键？
- 如何做到全局唯一？
- sequence 是什么？
  - 计数器
  - 跨表id不重复
- 分布式锁是什么？
- uuid 会重复么？
  - 以现在计算频率
  - 几百年重复
- snowflake 是什么？
  - 时间戳加随机数改进
  - 机器+时间+内存自增数
- 如何使用分页查询？
- limit 两个参数什么意思？
  - 跳
  - 几条
- 反序是什么？
  - 大数据量
  - 倒叙
- 非精确分页是什么？
- 精确分页是什么？
- 悲观锁是什么？
  - X锁
- 乐观锁是什么？
  - 自旋的原理是什么?
  - 查，直接修改，看是否成功
  - jdbc 是否返回 0
- 